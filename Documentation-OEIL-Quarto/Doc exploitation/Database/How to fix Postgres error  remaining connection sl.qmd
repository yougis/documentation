*Use the Comments section for questions

**Daily & Exclusive Content**

**Question:** I'm getting an error message on the application connecting to a PostgreSQL database  **Caused by: org.postgresql.util.PSQLException: FATAL: remaining connection slots are reserved for non-replication superuser connections**

How can I troubleshoot? & fix?

\*\*Answer:   \*\* First step is to check the max_connections setting

**SHOW max_connections;**

Second step - check the pg\_stat\_activity   view . This view exists in the pg_catalog schema

**SELECT count(*) FROM pg\_stat\_activity;**

Compare the figures from max\_connections & pg\_stat_activity , and you'll probably find the numbers are very close.

Depending on the setup - e..g if the PostgreSQL instance is shared - you may need to analyse which applications are consuming the connections and work with the application owners to manage the connections, using various techniques including connection pooling.

[PostgreSQL cheatsheet](https://www.dba-ninja.com/2018/10/postgresql-cheatsheet.html)

If you want to breakdown the connections per database - use this query

**SELECT datname, numbackends FROM pg\_stat\_database;**

The other method is to increase the max\_connections setting . The max\_connections is managed through the postgresql config file.

Find the config_file location through **SHOW config_file**

Don't just blindly change the setting . It may be necessary to review the server capacity and  confirm the planned connections can be supported

kill all other session :

```
SELECT 
    pg_terminate_backend(pid) 
FROM 
    pg_stat_activity 
WHERE 
    -- don't kill my own connection!
    pid <> pg_backend_pid()
    -- don't kill the connections to other databases
    AND datname = 'database_name'
    ;
```